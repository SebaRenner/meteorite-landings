<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <!-- <script type="text/javascript" src="./JSONData.js"/>  -->
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico"/>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
          integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
          crossorigin=""/>
    <!-- Make sure you put this AFTER Leaflet's CSS -->
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
            integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
            crossorigin=""></script>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="theme-color" content="#000000"/>
    <meta
            name="description"
            content="Web site created using create-react-app"
    />
    <link rel="apple-touch-icon" href="logo192.png"/>
    <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json"/>
    <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->
    <title>Meteorite Landings</title>
</head>
<body>
<noscript>You need to enable JavaScript to run this app.</noscript>
<div id="root"></div>
<div style="text-align: center">
    <div id="mapid" style="height: 500px; width: 50%; margin: auto"></div>
    <p id="progress">1804</p>
    <div class="slidecontainer" style="width:50%; margin:auto">
        <input type="range" min="1" max="100" value="50" class="slider" id="myRange"
               onchange="onSliderValueChange(this.value)">
    </div>
    <p id="info">-----</p>
</div>

<div id="Krasnojarsk" style = display:none>
  Krasnojarsk was the first pallasite meteorite ever found and studied and led to the creation of the Pallasite group, named after Pallas.
  <br>
  It was also the first meteorite ever etched with acid (by G. Thomson) and therefore was the first one to show to human eyes the Widmanstätten pattern.
  <br>
  <img src="Krasnojarsk.jpg" alt="Krasnojarsk">
</div>

<!--
  This HTML file is a template.
  If you open it directly in the browser, you will see an empty page.

  You can add webfonts, meta tags, or analytics to this file.
  The build step will place the bundled scripts into the <body> tag.

  To begin the development, run `npm start` or `yarn start`.
  To create a production bundle, use `npm run build` or `yarn build`.
-->
</body>
<script>
    var mymap = L.map('mapid').setView([0, 0], 1)
    var infopanel = document.getElementById("info")
    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png', {
        attribution: '©OpenStreetMap, ©CartoDB'
    }).addTo(mymap);
    const data = [
        {
            "name": "Rivolta de Bassi",
            "id": "22614",
            "nametype": "Valid",
            "recclass": "Stone-uncl",
            "mass": "103.3",
            "fall": "Fell",
            "year": 1490,
            "reclat": "45.483330",
            "reclong": "9.516670",
            "GeoLocation": "(45.48333, 9.51667)"
        },
        {
            "name": "Ensisheim",
            "id": "10039",
            "nametype": "Valid",
            "recclass": "LL6",
            "mass": "127,000",
            "fall": "Fell",
            "year": 1491,
            "reclat": "47.866670",
            "reclong": "7.350000",
            "GeoLocation": "(47.86667, 7.35)"
        },
        {
            "name": "Campo del Cielo",
            "id": "5247",
            "nametype": "Valid",
            "recclass": "Iron, IAB-MG",
            "mass": "50,000,000",
            "fall": "Found",
            "year": 1575,
            "reclat": "-27.466670",
            "reclong": "-60.583330",
            "GeoLocation": "(-27.46667, -60.58333)"
        },
        {
            "name": "Castrovillari",
            "id": "5295",
            "nametype": "Valid",
            "recclass": "Stone-uncl",
            "mass": "15,000",
            "fall": "Fell",
            "year": 1583,
            "reclat": "39.800000",
            "reclong": "16.200000",
            "GeoLocation": "(39.8, 16.2)"
        },
        {
            "name": "Morito",
            "id": "16745",
            "nametype": "Valid",
            "recclass": "Iron, IIIAB",
            "mass": "10,100,000",
            "fall": "Found",
            "year": 1600,
            "reclat": "27.050000",
            "reclong": "-105.433330",
            "GeoLocation": "(27.05, -105.43333)"
        },
        {
            "name": "Jalandhar",
            "id": "12069",
            "nametype": "Valid",
            "recclass": "Iron",
            "mass": "1,967",
            "fall": "Fell",
            "year": 1621,
            "reclat": "31.000000",
            "reclong": "75.000000",
            "GeoLocation": "(31.0, 75.0)"
        },
        {
            "name": "Stretchleigh",
            "id": "23732",
            "nametype": "Valid",
            "recclass": "Stone-uncl",
            "mass": "10,400",
            "fall": "Fell",
            "year": 1623,
            "reclat": "50.383330",
            "reclong": "-3.950000",
            "GeoLocation": "(50.38333, -3.95)"
        },
        {
            "name": "Hatford",
            "id": "11855",
            "nametype": "Valid",
            "recclass": "Stone-uncl",
            "mass": "29,000",
            "fall": "Fell",
            "year": 1628,
            "reclat": "51.650000",
            "reclong": "-1.516670",
            "GeoLocation": "(51.65, -1.51667)"
        },
        {
            "name": "Minamino",
            "id": "16692",
            "nametype": "Valid",
            "recclass": "L",
            "mass": "1,040",
            "fall": "Fell",
            "year": 1632,
            "reclat": "35.078330",
            "reclong": "136.933330",
            "GeoLocation": "(35.07833, 136.93333)"
        },
        {
            "name": "Mount Vaisi",
            "id": "16805",
            "nametype": "Valid",
            "recclass": "Stone-uncl",
            "mass": "17,000",
            "fall": "Fell",
            "year": 1637,
            "reclat": "44.083330",
            "reclong": "6.866670",
            "GeoLocation": "(44.08333, 6.86667)"
        },
        {
            "name": "Vago",
            "id": "24143",
            "nametype": "Valid",
            "recclass": "H6",
            "mass": "40",
            "fall": "Fell",
            "year": 1668,
            "reclat": "45.416670",
            "reclong": "11.133330",
            "GeoLocation": "(45.41667, 11.13333)"
        },
        {
            "name": "Ortenau",
            "id": "18033",
            "nametype": "Valid",
            "recclass": "Stone-uncl",
            "mass": "4,500",
            "fall": "Fell",
            "year": 1671,
            "reclat": "48.500000",
            "reclong": "8.000000",
            "GeoLocation": "(48.5, 8.0)"
        },
        {
            "name": "Sasagase",
            "id": "23187",
            "nametype": "Valid",
            "recclass": "H",
            "mass": "695",
            "fall": "Fell",
            "year": 1688,
            "reclat": "34.716670",
            "reclong": "137.783330",
            "GeoLocation": "(34.71667, 137.78333)"
        },
        {
            "name": "Schellin",
            "id": "23457",
            "nametype": "Valid",
            "recclass": "L",
            "mass": "7,000",
            "fall": "Fell",
            "year": 1715,
            "reclat": "53.350000",
            "reclong": "15.050000",
            "GeoLocation": "(53.35, 15.05)"
        },
        {
            "name": "Siratik",
            "id": "23615",
            "nametype": "Valid",
            "recclass": "Iron, IIAB",
            "mass": "1,700",
            "fall": "Found",
            "year": 1716,
            "reclat": "14.000000",
            "reclong": "-11.000000",
            "GeoLocation": "(14.0, -11.0)"
        },
        {
            "name": "Ploschkovitz",
            "id": "18849",
            "nametype": "Valid",
            "recclass": "L5",
            "mass": "39",
            "fall": "Fell",
            "year": 1723,
            "reclat": "50.533330",
            "reclong": "14.116670",
            "GeoLocation": "(50.53333, 14.11667)"
        },
        {
            "name": "Steinbach",
            "id": "23722",
            "nametype": "Valid",
            "recclass": "Iron, IVA-an",
            "mass": "98,000",
            "fall": "Found",
            "year": 1724,
            "reclat": "50.500000",
            "reclong": "12.500000",
            "GeoLocation": "(50.5, 12.5)"
        },
        {
            "name": "Rasgrad",
            "id": "22396",
            "nametype": "Valid",
            "recclass": "Stone-uncl",
            "mass": "24,700",
            "fall": "Fell",
            "year": 1740,
            "reclat": "43.500000",
            "reclong": "26.533330",
            "GeoLocation": "(43.5, 26.53333)"
        },
        {
            "name": "Ogi",
            "id": "17994",
            "nametype": "Valid",
            "recclass": "H6",
            "mass": "14,360",
            "fall": "Fell",
            "year": 1741,
            "reclat": "33.283330",
            "reclong": "130.200000",
            "GeoLocation": "(33.28333, 130.2)"
        },
        {
            "name": "Krasnojarsk",
            "id": "12356",
            "nametype": "Valid",
            "recclass": "Pallasite, PMG-an",
            "mass": "700,000",
            "fall": "Found",
            "year": 1749,
            "reclat": "54.900000",
            "reclong": "91.800000",
            "GeoLocation": "(54.9, 91.8)"
        },
        {
            "name": "Hraschina",
            "id": "11916",
            "nametype": "Valid",
            "recclass": "Iron, IID",
            "mass": "49,000",
            "fall": "Fell",
            "year": 1751,
            "reclat": "46.100000",
            "reclong": "16.333330",
            "GeoLocation": "(46.1, 16.33333)"
        },
        {
            "name": "Luponnas",
            "id": "14757",
            "nametype": "Valid",
            "recclass": "H3-5",
            "mass": "14,000",
            "fall": "Fell",
            "year": 1753,
            "reclat": "46.216670",
            "reclong": "5.000000",
            "GeoLocation": "(46.21667, 5.0)"
        },
        {
            "name": "Tabor",
            "id": "23776",
            "nametype": "Valid",
            "recclass": "H5",
            "mass": "7,540",
            "fall": "Fell",
            "year": 1753,
            "reclat": "49.400000",
            "reclong": "14.650000",
            "GeoLocation": "(49.4, 14.65)"
        },
        {
            "name": "Albareto",
            "id": "453",
            "nametype": "Valid",
            "recclass": "L/LL4",
            "mass": "2,000",
            "fall": "Fell",
            "year": 1766,
            "reclat": "44.650000",
            "reclong": "11.016670",
            "GeoLocation": "(44.65, 11.01667)"
        },
        {
            "name": "Lucé",
            "id": "14724",
            "nametype": "Valid",
            "recclass": "L6",
            "mass": "3,500",
            "fall": "Fell",
            "year": 1768,
            "reclat": "47.850000",
            "reclong": "0.483330",
            "GeoLocation": "(47.85, 0.48333)"
        },
        {
            "name": "Mauerkirchen",
            "id": "15446",
            "nametype": "Valid",
            "recclass": "L6",
            "mass": "19,000",
            "fall": "Fell",
            "year": 1768,
            "reclat": "48.183330",
            "reclong": "13.133330",
            "GeoLocation": "(48.18333, 13.13333)"
        },
        {
            "name": "Sena",
            "id": "23495",
            "nametype": "Valid",
            "recclass": "H4",
            "mass": "4,000",
            "fall": "Fell",
            "year": 1773,
            "reclat": "41.716670",
            "reclong": "-0.050000",
            "GeoLocation": "(41.71667, -0.05)"
        },
        {
            "name": "Rodach",
            "id": "22642",
            "nametype": "Valid",
            "recclass": "Stone-uncl",
            "mass": "2,900",
            "fall": "Fell",
            "year": 1775,
            "reclat": "50.350000",
            "reclong": "10.800000",
            "GeoLocation": "(50.35, 10.8)"
        },
        {
            "name": "Toluca",
            "id": "24018",
            "nametype": "Valid",
            "recclass": "Iron, IAB-sLL",
            "mass": "3,000,000",
            "fall": "Found",
            "year": 1776,
            "reclat": "19.566670",
            "reclong": "-99.566670",
            "GeoLocation": "(19.56667, -99.56667)"
        },
        {
            "name": "Longchang",
            "id": "14695",
            "nametype": "Valid",
            "recclass": "Iron, IVA-an",
            "mass": "158,500",
            "fall": "Found",
            "year": 1781,
            "reclat": "29.300000",
            "reclong": "105.300000",
            "GeoLocation": "(29.3, 105.3)"
        },
        {
            "name": "Bendegó",
            "id": "5015",
            "nametype": "Valid",
            "recclass": "Iron, IC",
            "mass": "5,360,000",
            "fall": "Found",
            "year": 1784,
            "reclat": "-10.116670",
            "reclong": "-39.200000",
            "GeoLocation": "(-10.11667, -39.2)"
        },
        {
            "name": "Sierra Blanca",
            "id": "23587",
            "nametype": "Valid",
            "recclass": "Iron, IAB?",
            "mass": "405",
            "fall": "Found",
            "year": 1784,
            "reclat": "27.150000",
            "reclong": "-104.900000",
            "GeoLocation": "(27.15, -104.9)"
        },
        {
            "name": "Eichstädt",
            "id": "7775",
            "nametype": "Valid",
            "recclass": "H5",
            "mass": "3,000",
            "fall": "Fell",
            "year": 1785,
            "reclat": "48.900000",
            "reclong": "11.216670",
            "GeoLocation": "(48.9, 11.21667)"
        },
        {
            "name": "Kharkov",
            "id": "12291",
            "nametype": "Valid",
            "recclass": "L6",
            "mass": "1,500",
            "fall": "Fell",
            "year": 1787,
            "reclat": "50.625000",
            "reclong": "35.075000",
            "GeoLocation": "(50.625, 35.075)"
        },
        {
            "name": "Barbotan",
            "id": "4942",
            "nametype": "Valid",
            "recclass": "H5",
            "mass": "6,400",
            "fall": "Fell",
            "year": 1790,
            "reclat": "43.950000",
            "reclong": "-0.050000",
            "GeoLocation": "(43.95, -0.05)"
        },
        {
            "name": "Zacatecas (1792)",
            "id": "30381",
            "nametype": "Valid",
            "recclass": "Iron, ungrouped",
            "mass": "1,000,000",
            "fall": "Found",
            "year": 1792,
            "reclat": "22.816670",
            "reclong": "-102.566670",
            "GeoLocation": "(22.81667, -102.56667)"
        },
        {
            "name": "Cape of Good Hope",
            "id": "5261",
            "nametype": "Valid",
            "recclass": "Iron, IVB",
            "mass": "136,000",
            "fall": "Found",
            "year": 1793,
            "reclat": "-33.500000",
            "reclong": "26.000000",
            "GeoLocation": "(-33.5, 26.0)"
        },
        {
            "name": "Siena",
            "id": "23586",
            "nametype": "Valid",
            "recclass": "LL5",
            "mass": "3,700",
            "fall": "Fell",
            "year": 1794,
            "reclat": "43.116670",
            "reclong": "11.600000",
            "GeoLocation": "(43.11667, 11.6)"
        },
        {
            "name": "Mulletiwu",
            "id": "16851",
            "nametype": "Valid",
            "recclass": "L",
            "mass": "25.5",
            "fall": "Fell",
            "year": 1795,
            "reclat": "9.333330",
            "reclong": "80.833330",
            "GeoLocation": "(9.33333, 80.83333)"
        },
        {
            "name": "Wold Cottage",
            "id": "24325",
            "nametype": "Valid",
            "recclass": "L6",
            "mass": "25,000",
            "fall": "Fell",
            "year": 1795,
            "reclat": "54.136670",
            "reclong": "-0.413330",
            "GeoLocation": "(54.13667, -0.41333)"
        },
        {
            "name": "Bjelaja Zerkov",
            "id": "5063",
            "nametype": "Valid",
            "recclass": "H6",
            "mass": "1,850",
            "fall": "Fell",
            "year": 1796,
            "reclat": "49.783330",
            "reclong": "30.166670",
            "GeoLocation": "(49.78333, 30.16667)"
        },
        {
            "name": "Portugal",
            "id": "18876",
            "nametype": "Valid",
            "recclass": "Stone-uncl",
            "mass": "4,500",
            "fall": "Fell",
            "year": 1796,
            "reclat": "38.500000",
            "reclong": "-8.000000",
            "GeoLocation": "(38.5, -8.0)"
        },
        {
            "name": "Prambanan",
            "id": "18884",
            "nametype": "Valid",
            "recclass": "Iron, ungrouped",
            "mass": "500,000",
            "fall": "Found",
            "year": 1797,
            "reclat": "-7.566670",
            "reclong": "110.833330",
            "GeoLocation": "(-7.56667, 110.83333)"
        },
        {
            "name": "Benares (a)",
            "id": "5011",
            "nametype": "Valid",
            "recclass": "LL4",
            "mass": "3,700",
            "fall": "Fell",
            "year": 1798,
            "reclat": "25.366670",
            "reclong": "82.916670",
            "GeoLocation": "(25.36667, 82.91667)"
        },
        {
            "name": "Salles",
            "id": "23111",
            "nametype": "Valid",
            "recclass": "L5",
            "mass": "9,000",
            "fall": "Fell",
            "year": 1798,
            "reclat": "46.050000",
            "reclong": "4.633330",
            "GeoLocation": "(46.05, 4.63333)"
        },
        {
            "name": "Mauritius",
            "id": "15447",
            "nametype": "Valid",
            "recclass": "L6",
            "mass": "220",
            "fall": "Fell",
            "year": 1801,
            "reclat": "-20.000000",
            "reclong": "57.000000",
            "GeoLocation": "(-20.0, 57.0)"
        },
        {
            "name": "Apt",
            "id": "2320",
            "nametype": "Valid",
            "recclass": "L6",
            "mass": "3,200",
            "fall": "Fell",
            "year": 1803,
            "reclat": "43.866670",
            "reclong": "5.383330",
            "GeoLocation": "(43.86667, 5.38333)"
        },
        {
            "name": "L'Aigle",
            "id": "12434",
            "nametype": "Valid",
            "recclass": "L6",
            "mass": "37,000",
            "fall": "Fell",
            "year": 1803,
            "reclat": "48.766670",
            "reclong": "0.633330",
            "GeoLocation": "(48.76667, 0.63333)"
        },
        {
            "name": "Mässing",
            "id": "15443",
            "nametype": "Valid",
            "recclass": "Howardite",
            "mass": "1,600",
            "fall": "Fell",
            "year": 1803,
            "reclat": "48.133330",
            "reclong": "12.616670",
            "GeoLocation": "(48.13333, 12.61667)"
        },
        {
            "name": "Bocas",
            "id": "5093",
            "nametype": "Valid",
            "recclass": "L6",
            "mass": "56",
            "fall": "Fell",
            "year": 1804,
            "reclat": "23.000000",
            "reclong": "-102.000000",
            "GeoLocation": "(23.0, -102.0)"
        },
        {
            "name": "Darmstadt",
            "id": "6603",
            "nametype": "Valid",
            "recclass": "H5",
            "mass": "100",
            "fall": "Fell",
            "year": 1804,
            "reclat": "49.866670",
            "reclong": "8.650000",
            "GeoLocation": "(49.86667, 8.65)"
        },
        {
            "name": "High Possil",
            "id": "11884",
            "nametype": "Valid",
            "recclass": "L6",
            "mass": "4,500",
            "fall": "Fell",
            "year": 1804,
            "reclat": "55.900000",
            "reclong": "-4.233330",
            "GeoLocation": "(55.9, -4.23333)"
        },
        {
            "name": "Charcas",
            "id": "5326",
            "nametype": "Valid",
            "recclass": "Iron, IIIAB",
            "mass": "1,400,000",
            "fall": "Found",
            "year": 1804,
            "reclat": "23.083330",
            "reclong": "-101.016670",
            "GeoLocation": "(23.08333, -101.01667)"
        }]

   /* var circle = L.circle([51.508, -0.11], {
        color: 'red',
        fillColor: '#f03',
        fillOpacity: 0.5,
        radius: 500,
    }).addTo(mymap).on('click', display_info);*/
    var markers = [];
    data.forEach((value, index) => {
        createMarker(value)
    })

    //creates markers and adds them to internal markerarray
    function createMarker(meteorite) {
        var color = '#f03';
        if (meteorite !== "") {
            color = '#ff7904'
        }
        var c = L.circle([meteorite.reclat, meteorite.reclong], {
            color: color,
            fillColor: color,
            fillOpacity: 0.5,
            radius: parseFloat(meteorite.mass)
        }).addTo(mymap).on('click', display_info);
        c.meteorite = meteorite;

        markers.push(c);
        var p = c.bindPopup("meteorimpact: " + c.meteorite.name);
        p.on('mouseover', function (e) {
            this.openPopup();
        });
        p.on('mouseout', function (e) {
            this.closePopup();
        });
    }

    function display_info(e) {
        var m = e.target.meteorite;
        showInfo(m.name);
        infopanel.innerText = m.name.concat(": ",m.recclass," - ",m.year, " - ",
        m.mass, " gramm, ", m.fall, " at ",m.GeoLocation)
    }

    ///SLIDER
    var slider = document.getElementById("myRange");
    var prog = document.getElementById("progress");
    var min = parseFloat(data[0].year);
    var max = parseFloat(data[data.length - 1].year);
    slider.max = max;
    slider.min = min;
    slider.value = slider.max;
    var lastSlidervalue = slider.value;
    var lastMarkerindex = markers.length - 1;

    function onSliderValueChange(value) {
        if (value < lastSlidervalue) {
            var i = lastMarkerindex;
            while (i >= 0 && markers[i].meteorite.year > value - 1) {
                mymap.removeLayer(markers[i]);
                i--
            }
            lastMarkerindex = i + 1;
        } else {
            var i = lastMarkerindex;
            while (i < markers.length && markers[i].meteorite.year < value) {
                mymap.addLayer(markers[i]);
                i++
            }
            lastMarkerindex = i - 1;
        }
        lastSlidervalue = value;
        prog.innerText = value;
    }

    function showInfo(name) {
      if (name === "Krasnojarsk") {
          var x = document.getElementById("Krasnojarsk");
          if (x.style.display === "none") {
              x.style.display = "block";
          } else {
              x.style.display = "none";
          }
      } else {
          var x = document.getElementById("Krasnojarsk");
          x.style.display = "none";
      }

    }


</script>
<style>
    /* The slider itself */
    .slider {
        -webkit-appearance: none;
        width: 100%;
        height: 15px;
        border-radius: 5px;
        background: #d3d3d3;
        outline: none;
        opacity: 0.7;
        -webkit-transition: .2s;
        transition: opacity .2s;
    }

    .slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 25px;
        height: 25px;
        border-radius: 50%;
        background: #4CAF50;
        cursor: pointer;
    }

    .slider::-moz-range-thumb {
        width: 25px;
        height: 25px;
        border-radius: 50%;
        background: #4CAF50;
        cursor: pointer;
    }
</style>
</html>
